<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Prac 2 Assignment 3: Unseen Data Prediction</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #fdfdfd; padding: 40px; color: #2c3e50; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 1px solid #eee; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .data-panel { padding: 15px; border-radius: 8px; border: 1px dashed #cbd5e0; background: #f8fafc; font-size: 0.9em; }
        .prediction-card { padding: 15px; background: #ebf8ff; border-left: 5px solid #3182ce; margin-top: 10px; }
        button { background: #3182ce; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        button:disabled { background: #a0aec0; }
        .highlight { color: #e53e3e; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>Generalization Test: Predicting Unseen Data</h2>
    <p>We train the AI on inputs 1-10, then ask it to predict values for 15, 20, and 25.</p>

    <div class="grid">
        <div class="data-panel">
            <strong>Training Data (Seen):</strong><br>
            Inputs: [1, 2, 3, ..., 10]<br>
            Rule: y = 10x - 5
        </div>
        <div class="data-panel">
            <strong>Test Data (Unseen):</strong><br>
            Inputs: <span class="highlight">[15, 20, 25]</span>
        </div>
    </div>

    <div style="margin-top: 20px;">
        <button id="train-btn" onclick="runInference()">Train & Predict Unseen</button>
    </div>

    <div id="results-area" style="margin-top:20px;"></div>
</div>

<script>
    async function runInference() {
        const btn = document.getElementById('train-btn');
        const resultsArea = document.getElementById('results-area');
        btn.disabled = true;
        resultsArea.innerHTML = "<em>AI is learning patterns...</em>";

        // 1. Prepare Training Data (1 to 10)
        const trainX = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        const trainY = trainX.map(x => 10 * x - 5);
        const xs = tf.tensor2d(trainX, [10, 1]);
        const ys = tf.tensor2d(trainY, [10, 1]);

        // 2. Build and Train Model
        const model = tf.sequential();
        model.add(tf.layers.dense({units: 1, inputShape: [1]}));
        model.compile({optimizer: tf.train.adam(0.1), loss: 'meanSquaredError'});

        await model.fit(xs, ys, {epochs: 200});

        // 3. Predict for UNSEEN values (15, 20, 25)
        const unseenX = [15, 20, 25];
        const expectedY = unseenX.map(x => 10 * x - 5);
        
        const predictionTensor = model.predict(tf.tensor2d(unseenX, [3, 1]));
        const predictedY = Array.from(predictionTensor.dataSync());

        // 4. Display Comparison
        resultsArea.innerHTML = "<h3>AI Performance on Unseen Data:</h3>";
        unseenX.forEach((x, i) => {
            const error = Math.abs(expectedY[i] - predictedY[i]).toFixed(2);
            resultsArea.innerHTML += `
                <div class="prediction-card">
                    <strong>Input: ${x}</strong><br>
                    Expected: ${expectedY[i]} | AI Predicted: ${predictedY[i].toFixed(2)}<br>
                    <small>Accuracy Gap: ${error}</small>
                </div>
            `;
        });
        btn.disabled = false;
    }
</script>
</body>
</html>